# Comitas_hackathon
# Структура
Comitas_hackathon_CMSIS/ -  ПО для микроконтроллера.

Keil_CMSIS_stm32f100RB/ - в протеусе датчики не работают, так как перифирия очень часто отказывается правильно работать, поэтому в беседе хакатона мною был задан вопрос: насколько протеус адекватно симулирует МК. В ответ получил: "Подобные проблемы являются возможными при проектировании систем и то, как они будут решаться, непосредственно влияет на оценку". Моё решение - купить плату с stm32f1 серией (оперативно нашёл stm32vldisc с stm32f100RB на борту) и протестить работу датчиков (DS18B20 также нашёл, другие не нашёл, но взял AHT20, работающий по I2C чисто для теста, ведь логика в целом одна и та же и отличия в коде чисто в посылаемых байтах и количестве считываемых) и как результат - то, что не работало в протеус, работает на железе. Надеюсь, это хоть как-то будет учтено...эх....

Proteus/ - проект протеуса (ни один датчик в нём не работает по неизвестным причинам:/, об этом также в следующем пункте). Не знаю, как сохраняются настройки в протеус, но терминал если что нужно настроить на 115200 бод (стоковое значение 9600) 

## Чудеса протеуса 
После написания кода для DS18B20 в протеусе, несмотря на полное (на мой взгляд) соответствие таймингов протоколу 1-Wire, датчик отказывался воспринимать команду преобразования температуры и отправки своего Scratchpad, но при этом реагировал на команду Read ROM (то есть тайминги работают...). После приобретения платы stm32vldisc сразу же протестировал код с датчиком (так как одна серия f1 то ничего менять в коде не пришлось). Нашёл у знакомого логический анализатор и решил посмотреть что там...Во-первых, конечно всё работало, датчик измерял и присылал температуру, но самое интересное - тайминги совпадают с кодом и протеусом...Что я только не тыкал и не делал в Proteus - чуда не произошло, а вся эта писанина, думаю, чисто для души, ведь наболело :)

## License

[MIT](https://choosealicense.com/licenses/mit/)